<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Audio Design Studios – Karter G. Brown</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="site-header">
    <div class="logo">Audio Design Studios</div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="portfolio.html">Portfolio</a>
      <a href="about.html">About</a>
      <a href="music.html">Music</a>
    </nav>
  </header>

  <main>
    <section class="env-image env-portfolio"></section>

    <section id="portfolio" class="hero">
      <div class="hero-content">
        <h1>Highlights</h1>
        <p>Listen to featured audio samples from my recent work including film scores, game design, and original compositions.</p>
      </div>

      <div class="highlights-section">
        <div class="player-wrapper">
          <div class="player-left">
            <div class="album-cover" aria-hidden="true">
              <img id="albumCover" src="Photos/headshot.webp" alt="Album cover" />
            </div>
          </div>

          <div class="player-right">
            <div class="playlist" id="playlist">
              <!-- Track rows will be injected here -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="playlists-section">
      <div class="playlists-container">
        <!-- Left Playlist: Daughter of the Plains -->
        <div class="playlist-card">
          <div class="playlist-card-header">
            <div class="playlist-album-art" id="dotpArt">
              <img src="Photos/headshot.webp" alt="Daughter of the Plains">
            </div>
            <h3>Daughter of the Plains</h3>
          </div>
          <div class="playlist-content" id="dotpPlaylist">
            <!-- Tracks will be injected here -->
          </div>
        </div>

        <!-- Right Playlist: All Works -->
        <div class="playlist-card">
          <div class="playlist-card-header">
            <div class="playlist-album-art" id="allWorksArt">
              <img src="Photos/headshot.webp" alt="All Works">
            </div>
            <h3>All Works</h3>
          </div>
          <div class="playlist-scroll" id="allWorksPlaylist">
            <!-- Tracks will be injected here -->
          </div>
        </div>
      </div>
    </section>
  </main>

<footer class="site-footer">
  <div class="footer-content">
     <h2>Contact</h2>
     <p>Email: <a href="mailto:music@kartergbrown.com">music@kartergbrown.com</a></p>

     <p class="footer-copy">
     © <span id="year"></span> Audio Design Studios. All rights reserved.
     </p>
  </div>
</footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
  <!-- Waveform player (WaveSurfer) -->
  <script src="https://unpkg.com/wavesurfer.js"></script>
  <script>
    // Wait for DOM and WaveSurfer to be ready
    document.addEventListener('DOMContentLoaded', function() {
      // Check if WaveSurfer loaded
      if (typeof WaveSurfer === 'undefined') {
        console.error('WaveSurfer library failed to load');
        return;
      }

      // Basic playlist data - replace the urls with your hosted audio files
      const tracks = [
        { id: 'track1', title: 'Neon Wasteland', url: 'audio/NeonWasteland_FullMix.mp3' },
        { id: 'track2', title: 'Interstellar Worlds Align', url: 'audio/Interstellar Worlds Align.mp3' },
        { id: 'track3', title: 'Buried Trials', url: 'audio/BuriedTrials_FullMix.mp3' }
      ];

      const playlistEl = document.getElementById('playlist');

      function createTrackRow(track) {
        const row = document.createElement('div');
        row.className = 'track-row';

        const header = document.createElement('div');
        header.className = 'track-header';

        const num = document.createElement('div');
        num.className = 'track-number';
        num.textContent = track.id.replace('track', '');

        const btn = document.createElement('button');
        btn.className = 'play-btn';
        btn.setAttribute('aria-label', `Play ${track.title}`);
        btn.textContent = '▶';

        const title = document.createElement('div');
        title.className = 'track-title';
        title.textContent = track.title;

        const wave = document.createElement('div');
        wave.className = 'waveform';
        wave.id = `wave_${track.id}`;

        header.appendChild(num);
        header.appendChild(btn);
        header.appendChild(title);

        row.appendChild(header);
        row.appendChild(wave);

        // Create WaveSurfer instance
        const ws = WaveSurfer.create({
          container: wave,
          waveColor: '#6d6d76',
          progressColor: '#31c49f',
          height: 40,
          responsive: true,
          normalize: true
        });

        // prevent right-click download/context menu on waveform
        wave.addEventListener('contextmenu', e => e.preventDefault());

        ws.load(track.url);

        ws.on('ready', () => {
          console.log('Track ready:', track.title);
        });

        ws.on('error', (e) => {
          console.error('WaveSurfer error for', track.title, ':', e);
        });

        // update play/pause button
        btn.addEventListener('click', () => {
          ws.playPause();
        });

        ws.on('play', () => { btn.textContent = '⏸'; });
        ws.on('pause', () => { btn.textContent = '▶'; });
        ws.on('finish', () => { btn.textContent = '▶'; });

        // click on waveform seeks to that location (built-in)

        // append row
        playlistEl.appendChild(row);
      }

      // Build playlist
      tracks.forEach(createTrackRow);

      // Accessibility: prevent dragging of the album cover image
      const album = document.getElementById('albumCover');
      if (album) album.setAttribute('draggable', 'false');

      // Populate playlists section
      const daughterOfPlainsData = [
        { title: 'Opening Theme', artwork: 'Photos/headshot.webp', url: 'audio/NeonWasteland_FullMix.mp3' },
        { title: 'Journey Begins', artwork: 'Photos/headshot.webp', url: 'audio/Interstellar Worlds Align.mp3' },
        { title: 'Heartland', artwork: 'Photos/headshot.webp', url: 'audio/BuriedTrials_FullMix.mp3' },
        { title: 'Memories', artwork: 'Photos/headshot.webp', url: 'audio/NeonWasteland_FullMix.mp3' },
        { title: 'Finale', artwork: 'Photos/headshot.webp', url: 'audio/Interstellar Worlds Align.mp3' }
      ];

      const allWorksData = [
        { title: 'Neon Wasteland', artwork: 'Photos/headshot.webp', url: 'audio/NeonWasteland_FullMix.mp3' },
        { title: 'Interstellar Worlds Align', artwork: 'Photos/headshot.webp', url: 'audio/Interstellar Worlds Align.mp3' },
        { title: 'Buried Trials', artwork: 'Photos/headshot.webp', url: 'audio/BuriedTrials_FullMix.mp3' },
        { title: 'Digital Dreams', artwork: 'Photos/headshot.webp', url: 'audio/NeonWasteland_FullMix.mp3' },
        { title: 'Cosmic Voyage', artwork: 'Photos/headshot.webp', url: 'audio/Interstellar Worlds Align.mp3' },
        { title: 'Electric Pulse', artwork: 'Photos/headshot.webp', url: 'audio/BuriedTrials_FullMix.mp3' },
        { title: 'Resonance', artwork: 'Photos/headshot.webp', url: 'audio/NeonWasteland_FullMix.mp3' },
        { title: 'Timeless Echo', artwork: 'Photos/headshot.webp', url: 'audio/Interstellar Worlds Align.mp3' },
        { title: 'Void Walker', artwork: 'Photos/headshot.webp', url: 'audio/BuriedTrials_FullMix.mp3' },
        { title: 'Aurora', artwork: 'Photos/headshot.webp', url: 'audio/NeonWasteland_FullMix.mp3' },
        { title: 'Cascade', artwork: 'Photos/headshot.webp', url: 'audio/Interstellar Worlds Align.mp3' },
        { title: 'Nexus', artwork: 'Photos/headshot.webp', url: 'audio/BuriedTrials_FullMix.mp3' },
        { title: 'Luminescence', artwork: 'Photos/headshot.webp', url: 'audio/NeonWasteland_FullMix.mp3' },
        { title: 'Phantom Requiem', artwork: 'Photos/headshot.webp', url: 'audio/Interstellar Worlds Align.mp3' },
        { title: 'Ethereal', artwork: 'Photos/headshot.webp', url: 'audio/BuriedTrials_FullMix.mp3' },
        { title: 'Serpent', artwork: 'Photos/headshot.webp', url: 'audio/NeonWasteland_FullMix.mp3' },
        { title: 'Paradox', artwork: 'Photos/headshot.webp', url: 'audio/Interstellar Worlds Align.mp3' },
        { title: 'Horizon', artwork: 'Photos/headshot.webp', url: 'audio/BuriedTrials_FullMix.mp3' },
        { title: 'Mirage', artwork: 'Photos/headshot.webp', url: 'audio/NeonWasteland_FullMix.mp3' },
        { title: 'Sanctum', artwork: 'Photos/headshot.webp', url: 'audio/Interstellar Worlds Align.mp3' },
        { title: 'Twilight', artwork: 'Photos/headshot.webp', url: 'audio/BuriedTrials_FullMix.mp3' }
      ];

      function createPlaylistItem(track, index) {
        const item = document.createElement('div');
        item.className = 'track-item';

        const info = document.createElement('div');
        info.className = 'track-item-info';

        const num = document.createElement('div');
        num.className = 'track-item-number';
        num.textContent = `${index + 1}`;

        const title = document.createElement('div');
        title.className = 'track-item-title';
        title.textContent = track.title;

        info.appendChild(num);
        info.appendChild(title);

        const btn = document.createElement('button');
        btn.className = 'track-item-play-btn';
        btn.setAttribute('aria-label', `Play ${track.title}`);
        btn.textContent = '▶';
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          console.log('Playing:', track.title);
          btn.textContent = btn.textContent === '▶' ? '⏸' : '▶';
        });

        item.appendChild(info);
        item.appendChild(btn);

        return item;
      }

      const dotpEl = document.getElementById('dotpPlaylist');
      const allWorksEl = document.getElementById('allWorksPlaylist');

      daughterOfPlainsData.forEach((track, idx) => {
        dotpEl.appendChild(createPlaylistItem(track, idx));
      });

      allWorksData.forEach((track, idx) => {
        allWorksEl.appendChild(createPlaylistItem(track, idx));
      });

      // Prevent right-click download on playlists
      dotpEl.addEventListener('contextmenu', (e) => e.preventDefault());
      allWorksEl.addEventListener('contextmenu', (e) => e.preventDefault());
    });
  </script>
</body>
</html>   